
## Graph summarization Algorithm

Rule learner AnyBURL (Anytime Bottom Up Rule Learning):

https://web.informatik.uni-mannheim.de/AnyBURL/

## Use case and data sets

Bio2RDF Drug Bank data set:

* https://download.bio2rdf.org/#/release/4/drugbank/

Logs of Bio2RDF user's SPARQL queries: 

* https://umids-download.137.120.31.102.nip.io/bio2rdf/logs/

## Use Python to parse SPARQL

Install the packages:

```
cd python
pip install -r requirements.txt
```

Run the script.

```
python3 parse_sparql.py 
```


## Use Java to parse SPARQL

https://github.com/AKSW/LSQ/tree/develop/lsq-parser/src/main/java/org/aksw/simba/lsq/parser

```bash
cd java
mvn clean package

```

java/org/semanticscience/d2s

## Use the LSQ tool

### Representing SPARQL as RDF: LSQ 

http://lsq.aksw.org/

Skip tests and build:

```bash
mvn -Pdist,standalone clean install
java -jar lsq-cli/target/lsq-cli-2.0.0-SNAPSHOT-jar-with-dependencies.jar
# Now move it somewhere we can reuse it easily
mv lsq-cli/target/lsq-cli-2.0.0-SNAPSHOT-jar-with-dependencies.jar /opt/lsq.jar
```

Download the SPARQL query log file example:

```bash
wget https://raw.githubusercontent.com/vemonet/LSQ/develop/lsq-core/src/test/resources/logs/virtuoso.dbpedia.log
```

Run the built jar:

```bash
java -jar /opt/lsq.jar
```


### Generate RDF from logs

Run the thing to generate RDF from logs :

```bash
java -jar /opt/lsq.jar rx rdfize --endpoint=http://dbpedia.org/sparql virtuoso.dbpedia.log 
```


### Analyze queries structure

Run the thing to analyze the structure of SPARQL queries using docs from http://lsq.aksw.org/v2/usage/benchmarking.html:

1. Useless command that generate some RDF without interesting informations about the SPARQL endpoint (but required for the next step)

```bash
java -jar /opt/lsq.jar rx benchmark create --endpoint http://dbpedia.org/sparql --dataset dbpedia
```

2. Another useless command, requires you to take the file generated by the previous command

```bash
java -jar /opt/lsq.jar rx benchmark prepare -c xc-dbpedia_2021-10-22.conf.ttl
```

3. Finally starting the benchmark on our log file! Be careful you need to change the filename again, and this time LSQ generated a long name. Not sure why there is this `foo/*.trig` here, the documentation does not mention anything about it.

```bash
java -jar /opt/lsq.jar rx benchmark run -c xc-dbpedia_2021-10-22_2021-10-22T12_26_40_828056Z.run.ttl virtuoso.dbpedia.log foo/*.trig
```

Of course getting an error with: `zsh: no matches found: foo/*.trig`

So we remove it:

```bash
java -jar /opt/lsq.jar rx benchmark run -c xc-dbpedia_2021-10-22_2021-10-22T12_26_40_828056Z.run.ttl virtuoso.dbpedia.log
```

